Return-Path: <linux-input+bounces-15449-lists+linux-input=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-input@lfdr.de
Delivered-To: lists+linux-input@lfdr.de
Received: from dfw.mirrors.kernel.org (dfw.mirrors.kernel.org [IPv6:2605:f480:58:1:0:1994:3:14])
	by mail.lfdr.de (Postfix) with ESMTPS id 7C748BD6FAD
	for <lists+linux-input@lfdr.de>; Tue, 14 Oct 2025 03:25:16 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by dfw.mirrors.kernel.org (Postfix) with ESMTPS id CEA244ECE15
	for <lists+linux-input@lfdr.de>; Tue, 14 Oct 2025 01:25:05 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 5C1C813DDAA;
	Tue, 14 Oct 2025 01:25:01 +0000 (UTC)
X-Original-To: linux-input@vger.kernel.org
Received: from outboundhk.mxmail.xiaomi.com (outboundhk.mxmail.xiaomi.com [118.143.206.90])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id EB98322068B;
	Tue, 14 Oct 2025 01:24:58 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=118.143.206.90
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1760405101; cv=none; b=nL1OBBusTR1QonQC1HTXp3/7HAlTDm72IScz6qxn3reGQygT8kez/s49b8irsbzrH0KQ6Sy9t2iXzeYuUKU+MDTMLaKs3mD0+q9rlgvxMPa4VNpo0K7B7TTafcaefd6Ssjw/B7dLWjgY9Pm7VasNJYeSStQyJOLN0WExDs1Wm9g=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1760405101; c=relaxed/simple;
	bh=0lfUdQvdldCrhXHTQGEwLkzKT6LKbQZFh3o+ySPk2Ys=;
	h=From:To:CC:Subject:Date:Message-ID:References:In-Reply-To:
	 Content-Type:MIME-Version; b=jPBuLACv1imzFI4ptvCTj28HMAbms8aL0oMAJvUZcOSINesT624KYHHMgxepIgHdJNqjMyynxnzlC5IRJXxCstYrKgp/RJKDMJrMq82LJSCCEUZkRI7hzRPWp78Jr2JQwr6yp68qbBrnHGX5vz+sKZDA4+zcGJrygx9NsvRPjdY=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com; spf=pass smtp.mailfrom=xiaomi.com; arc=none smtp.client-ip=118.143.206.90
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=xiaomi.com
X-CSE-ConnectionGUID: C+0glNcCT8Ce9uHwqMr7HA==
X-CSE-MsgGUID: B+8Fn7WmT2WfgafvMNs5Rg==
X-IronPort-AV: E=Sophos;i="6.19,226,1754928000"; 
   d="scan'208";a="129376162"
From: =?gb2312?B?wqy5+rrq?= <luguohong@xiaomi.com>
To: Dmitry Torokhov <dmitry.torokhov@gmail.com>, Jiri Kosina
	<jikos@kernel.org>, Benjamin Tissoires <bentiss@kernel.org>
CC: "kenalba@google.com" <kenalba@google.com>, "linux-input@vger.kernel.org"
	<linux-input@vger.kernel.org>, "linux-kernel@vger.kernel.org"
	<linux-kernel@vger.kernel.org>, =?gb2312?B?wO7F9A==?= <lipeng43@xiaomi.com>,
	=?gb2312?B?y87D3MPc?= <songmimi@xiaomi.com>, =?gb2312?B?wqy5+rrq?=
	<luguohong@xiaomi.com>
Subject: =?gb2312?B?tPC4tDogW0V4dGVybmFsIE1haWxdW1BBVENIXSBISUQ6IGhpZC1pbnB1dDog?=
 =?gb2312?Q?only_ignore_0_battery_events_for_digitizers?=
Thread-Topic: [External Mail][PATCH] HID: hid-input: only ignore 0 battery
 events for digitizers
Thread-Index: AQHcOazZHRANaD7djkOKShmNHYh1F7S7MO8bgAWtdUM=
Date: Tue, 14 Oct 2025 01:24:51 +0000
Message-ID: <0af10be7ca044b2f981bc6dabaee2df5@xiaomi.com>
References: <of5qjeij72wduee3zyf26drfcwhpsl4sjs3v6tfjv3tgl3xsol@sss7zcyawwaz>,<6ec0ba2fd4ba42bf91fa8c5dbfb5e1c0@xiaomi.com>
In-Reply-To: <6ec0ba2fd4ba42bf91fa8c5dbfb5e1c0@xiaomi.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
Precedence: bulk
X-Mailing-List: linux-input@vger.kernel.org
List-Id: <linux-input.vger.kernel.org>
List-Subscribe: <mailto:linux-input+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-input+unsubscribe@vger.kernel.org>
MIME-Version: 1.0

DQpIaSBKaXJpIEtvc2luYSBhbmQgQmVuamFtaW4gVGlzc29pcmVzISBJcyB0aGVyZSBhbnkgbmV3
IHByb2dyZXNzIG9uIGdldHRpbmcgdGhpcyBwYXRjaCBpbnRvIHRoZSBrZXJuZWw/IEkgbG9vayBm
b3J3YXJkIHRvIGhlYXJpbmcgZnJvbSB5b3UuIFRoYW5rIHlvdSB2ZXJ5IG11Y2ghDQoNCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCreivP7Iyzogwqy5+rrqDQq3osvN
yrG85DogMjAyNcTqMTDUwjEwyNUgMTg6NDMNCsrVvP7IyzogRG1pdHJ5IFRvcm9raG92OyBKaXJp
IEtvc2luYTsgQmVuamFtaW4gVGlzc29pcmVzDQqzrcvNOiBrZW5hbGJhQGdvb2dsZS5jb207IGxp
bnV4LWlucHV0QHZnZXIua2VybmVsLm9yZzsgbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZzsg
wO7F9Dsgy87D3MPcOyDCrLn6uuoNCtb3zOI6ILTwuLQ6IFtFeHRlcm5hbCBNYWlsXVtQQVRDSF0g
SElEOiBoaWQtaW5wdXQ6IG9ubHkgaWdub3JlIDAgYmF0dGVyeSBldmVudHMgZm9yIGRpZ2l0aXpl
cnMNCg0KVGhhbmtzLCBEbWl0cnkuDQoNCkhpIEppcmkgS29zaW5hLCBCZW5qYW1pbiBUaXNzb2ly
ZXMsIHBsZWFzZSBsZXQgbWUga25vdyBvbmNlIHlvdSd2ZSBtZXJnZWQgdGhpcyBwYXRjaCBpbnRv
IHRoZSBrZXJuZWwuIFRoYW5rcyENCg0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXw0Kt6K8/sjLOiBEbWl0cnkgVG9yb2tob3YgPGRtaXRyeS50b3Jva2hvdkBnbWFpbC5j
b20+DQq3osvNyrG85DogMjAyNcTqMTDUwjEwyNUgMTQ6MTINCsrVvP7IyzogSmlyaSBLb3NpbmE7
IEJlbmphbWluIFRpc3NvaXJlcw0Ks63LzTogwqy5+rrqOyBrZW5hbGJhQGdvb2dsZS5jb207IGxp
bnV4LWlucHV0QHZnZXIua2VybmVsLm9yZzsgbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZw0K
1vfM4jogW0V4dGVybmFsIE1haWxdW1BBVENIXSBISUQ6IGhpZC1pbnB1dDogb25seSBpZ25vcmUg
MCBiYXR0ZXJ5IGV2ZW50cyBmb3IgZGlnaXRpemVycw0KDQpbzeKyv9PKvP5dILTL08q8/sC01LTT
2tChw9e5q8u+zeKyv6Osx+u998n3tKbA7aGjyPS21NPKvP6wssir0NS05tLJo6zH672r08q8/teq
t6K4+G1pc2VjQHhpYW9taS5jb229+NDQt7TAoQ0KDQpDb21taXQgNTgxYzQ0ODQ3NjllICgiSElE
OiBpbnB1dDogbWFwIGRpZ2l0aXplciBiYXR0ZXJ5IHVzYWdlIikgYWRkZWQNCmhhbmRsaW5nIG9m
IGJhdHRlcnkgZXZlbnRzIGZvciBkaWdpdGl6ZXJzICh0eXBpY2FsbHkgZm9yIGJhdHRlcmllcw0K
cHJlc2VudGVkIGluIHN0eWxpKS4gRGlnaXRpemVycyB0eXBpY2FsbHkgcmVwb3J0IGNvcnJlY3Qg
YmF0dGVyeSBsZXZlbHMNCm9ubHkgd2hlbiBzdHlsdXMgaXMgYWN0aXZlbHkgdG91Y2hpbmcgdGhl
IHN1cmZhY2UsIGFuZCBpbiBvdGhlciBjYXNlcw0KdGhleSBtYXkgcmVwb3J0IGJhdHRlcnkgbGV2
ZWwgb2YgMC4gVG8gYXZvaWQgY29uZnVzaW5nIGNvbnN1bWVycyBvZiB0aGUNCmJhdHRlcnkgaW5m
b3JtYXRpb24gdGhlIGNvZGUgd2FzIGFkZGVkIHRvIGZpbGVyIG91dCByZXBvcnRzIHdpdGggMA0K
YmF0dGVyeSBsZXZlbHMuDQoNCkhvd2V2ZXIgdGhlcmUgZXhpc3Qgb3RoZXIga2luZHMgb2YgZGV2
aWNlcyB0aGF0IG1heSBsZWdpdGltYXRlbHkgcmVwb3J0DQowIGJhdHRlcnkgbGV2ZWxzLiBGaXgg
dGhpcyBieSBmaWx0ZXJpbmcgb3V0IDAtbGV2ZWwgcmVwb3J0cyBvbmx5IGZvcg0KZGlnaXRpemVy
IHVzYWdlcywgYW5kIGNvbnRpbnVlIHJlcG9ydGluZyB0aGVtIGZvciBvdGhlciBraW5kcyBvZiBk
ZXZpY2VzDQooU21hcnQgQmF0dGVyaWVzLCBldGMpLg0KDQpSZXBvcnRlZC1ieTogwqy5+rrqIDxs
dWd1b2hvbmdAeGlhb21pLmNvbT4NClRlc3RlZC1ieTogwqy5+rrqIDxsdWd1b2hvbmdAeGlhb21p
LmNvbT4NCkZpeGVzOiA1ODFjNDQ4NDc2OWUgKCJISUQ6IGlucHV0OiBtYXAgZGlnaXRpemVyIGJh
dHRlcnkgdXNhZ2UiKQ0KU2lnbmVkLW9mZi1ieTogRG1pdHJ5IFRvcm9raG92IDxkbWl0cnkudG9y
b2tob3ZAZ21haWwuY29tPg0KLS0tDQogZHJpdmVycy9oaWQvaGlkLWlucHV0LmMgfCAxMCArKysr
KysrLS0tDQogMSBmaWxlIGNoYW5nZWQsIDcgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkN
Cg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvaGlkL2hpZC1pbnB1dC5jIGIvZHJpdmVycy9oaWQvaGlk
LWlucHV0LmMNCmluZGV4IGZmMTc4NGI1YzJhNC4uYmEzZjY2NTVhZjllIDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9oaWQvaGlkLWlucHV0LmMNCisrKyBiL2RyaXZlcnMvaGlkL2hpZC1pbnB1dC5jDQpA
QCAtNTk1LDE0ICs1OTUsMTggQEAgc3RhdGljIHZvaWQgaGlkaW5wdXRfY2xlYW51cF9iYXR0ZXJ5
KHN0cnVjdCBoaWRfZGV2aWNlICpkZXYpDQogICAgICAgIGRldi0+YmF0dGVyeSA9IE5VTEw7DQog
fQ0KDQotc3RhdGljIHZvaWQgaGlkaW5wdXRfdXBkYXRlX2JhdHRlcnkoc3RydWN0IGhpZF9kZXZp
Y2UgKmRldiwgaW50IHZhbHVlKQ0KK3N0YXRpYyB2b2lkIGhpZGlucHV0X3VwZGF0ZV9iYXR0ZXJ5
KHN0cnVjdCBoaWRfZGV2aWNlICpkZXYsDQorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1bnNpZ25lZCBpbnQgdXNhZ2UsIGludCB2YWx1ZSkNCiB7DQogICAgICAgIGludCBjYXBh
Y2l0eTsNCg0KICAgICAgICBpZiAoIWRldi0+YmF0dGVyeSkNCiAgICAgICAgICAgICAgICByZXR1
cm47DQoNCi0gICAgICAgaWYgKHZhbHVlID09IDAgfHwgdmFsdWUgPCBkZXYtPmJhdHRlcnlfbWlu
IHx8IHZhbHVlID4gZGV2LT5iYXR0ZXJ5X21heCkNCisgICAgICAgaWYgKCh1c2FnZSAmIEhJRF9V
U0FHRV9QQUdFKSA9PSBISURfVVBfRElHSVRJWkVSICYmIHZhbHVlID09IDApDQorICAgICAgICAg
ICAgICAgcmV0dXJuOw0KKw0KKyAgICAgICBpZiAodmFsdWUgPCBkZXYtPmJhdHRlcnlfbWluIHx8
IHZhbHVlID4gZGV2LT5iYXR0ZXJ5X21heCkNCiAgICAgICAgICAgICAgICByZXR1cm47DQoNCiAg
ICAgICAgY2FwYWNpdHkgPSBoaWRpbnB1dF9zY2FsZV9iYXR0ZXJ5X2NhcGFjaXR5KGRldiwgdmFs
dWUpOw0KQEAgLTE1MTgsNyArMTUyMiw3IEBAIHZvaWQgaGlkaW5wdXRfaGlkX2V2ZW50KHN0cnVj
dCBoaWRfZGV2aWNlICpoaWQsIHN0cnVjdCBoaWRfZmllbGQgKmZpZWxkLCBzdHJ1Y3QNCiAgICAg
ICAgICAgICAgICBib29sIGhhbmRsZWQgPSBoaWRpbnB1dF9zZXRfYmF0dGVyeV9jaGFyZ2Vfc3Rh
dHVzKGhpZCwgdXNhZ2UtPmhpZCwgdmFsdWUpOw0KDQogICAgICAgICAgICAgICAgaWYgKCFoYW5k
bGVkKQ0KLSAgICAgICAgICAgICAgICAgICAgICAgaGlkaW5wdXRfdXBkYXRlX2JhdHRlcnkoaGlk
LCB2YWx1ZSk7DQorICAgICAgICAgICAgICAgICAgICAgICBoaWRpbnB1dF91cGRhdGVfYmF0dGVy
eShoaWQsIHVzYWdlLT5oaWQsIHZhbHVlKTsNCg0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAg
ICAgICAgfQ0KLS0NCjIuNTEuMC43NDAuZzZhZGIwNTRkMTItZ29vZw0KDQoNCi0tDQpEbWl0cnkN
CiMvKioqKioqsb7Tyrz+vLDG5Li9vP66rNPQ0KHD17mry761xLGjw9zQxc+io6y99s/e09q3osvN
uPjJz8PmtdjWt9bQwdCz9rXEuPbIy7vyyLrX6aGjvfvWucjOus7G5Mv7yMvS1MjOus7Qzsq9yrnT
w6OosPzAqLWrsrvP3tPayKuyv7vysr+31rXY0LnCtqGiuLTWxqGiu/LJoreio6mxvtPKvP7W0LXE
0MXPoqGjyOe5+8T6tO3K1cHLsb7Tyrz+o6zH68T6waK8tLXnu7C78tPKvP7NqNaqt6K8/sjLsqLJ
vrP9sb7Tyrz+o6EgVGhpcyBlLW1haWwgYW5kIGl0cyBhdHRhY2htZW50cyBjb250YWluIGNvbmZp
ZGVudGlhbCBpbmZvcm1hdGlvbiBmcm9tIFhJQU9NSSwgd2hpY2ggaXMgaW50ZW5kZWQgb25seSBm
b3IgdGhlIHBlcnNvbiBvciBlbnRpdHkgd2hvc2UgYWRkcmVzcyBpcyBsaXN0ZWQgYWJvdmUuIEFu
eSB1c2Ugb2YgdGhlIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBoZXJlaW4gaW4gYW55IHdheSAoaW5j
bHVkaW5nLCBidXQgbm90IGxpbWl0ZWQgdG8sIHRvdGFsIG9yIHBhcnRpYWwgZGlzY2xvc3VyZSwg
cmVwcm9kdWN0aW9uLCBvciBkaXNzZW1pbmF0aW9uKSBieSBwZXJzb25zIG90aGVyIHRoYW4gdGhl
IGludGVuZGVkIHJlY2lwaWVudChzKSBpcyBwcm9oaWJpdGVkLiBJZiB5b3UgcmVjZWl2ZSB0aGlz
IGUtbWFpbCBpbiBlcnJvciwgcGxlYXNlIG5vdGlmeSB0aGUgc2VuZGVyIGJ5IHBob25lIG9yIGVt
YWlsIGltbWVkaWF0ZWx5IGFuZCBkZWxldGUgaXQhKioqKioqLyMNCg==

