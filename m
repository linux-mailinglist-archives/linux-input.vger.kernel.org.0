Return-Path: <linux-input-owner@vger.kernel.org>
X-Original-To: lists+linux-input@lfdr.de
Delivered-To: lists+linux-input@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 6E7847C672E
	for <lists+linux-input@lfdr.de>; Thu, 12 Oct 2023 09:57:28 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1347189AbjJLHve (ORCPT <rfc822;lists+linux-input@lfdr.de>);
        Thu, 12 Oct 2023 03:51:34 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:55874 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1378064AbjJLHvd (ORCPT
        <rfc822;linux-input@vger.kernel.org>);
        Thu, 12 Oct 2023 03:51:33 -0400
Received: from mout02.posteo.de (mout02.posteo.de [185.67.36.66])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id F1A30C4
        for <linux-input@vger.kernel.org>; Thu, 12 Oct 2023 00:51:29 -0700 (PDT)
Received: from submission (posteo.de [185.67.36.169]) 
        by mout02.posteo.de (Postfix) with ESMTPS id B30FD240101
        for <linux-input@vger.kernel.org>; Thu, 12 Oct 2023 09:51:27 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=posteo.de; s=2017;
        t=1697097087; bh=IKxDqpYuWFgY+jUM6aKU1g9Q72AhrBRR9A6f3L+3nBY=;
        h=Message-ID:Subject:From:To:Cc:Date:Content-Transfer-Encoding:
         MIME-Version:From;
        b=iXUhG+Pe8MVO/M9kKMgYMuasYm4yDYOPNPDa+YS/e3AlA/syrxqAKHBDbpEV2666Y
         KfZGKRhWDVLrlq37Yujf0eMVGmFaaE198XZcnAfXngqSpqR22BvRXGZRtwRwPAKy5h
         2jgUS+OCJNJyvnXFHw7znCXJtUAQGNI4x3x/LIpsz0S2M77itz5XWmS23wsAz6/hgY
         ytW7MouXGvF0vdGW86WYeLaFc9XsH92cch+RiVxGsAaK5t4yiJuYBTtie/c5cbeEzG
         lc0kgXA/QWP2SvXwczb8y2vQtxofFwQjl5QHLKVPctkxQxP78pRK+kuMloOGOV5s53
         OC+FaPWKOm1jg==
Received: from customer (localhost [127.0.0.1])
        by submission (posteo.de) with ESMTPSA id 4S5hfQ5yxJz6txR;
        Thu, 12 Oct 2023 09:51:26 +0200 (CEST)
Message-ID: <15fd0e0400e5edab7f86e2f51ba3cb4faa52ed79.camel@posteo.de>
Subject: Re: [PATCH] hid: lenovo: Resend all settings on reset_resume for
 compact keyboards
From:   Martin Kepplinger <martink@posteo.de>
To:     jikos@kernel.org, benjamin.tissoires@redhat.com, jm@lentin.co.uk,
        linux-kernel@vger.kernel.org
Cc:     linux-input@vger.kernel.org, stable@vger.kernel.org
Date:   Thu, 12 Oct 2023 07:51:26 +0000
In-Reply-To: <20231002150914.22101-1-martink@posteo.de>
References: <20231002150914.22101-1-martink@posteo.de>
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_BLOCKED,
        RCVD_IN_MSPIKE_H5,RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS
        autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-input.vger.kernel.org>
X-Mailing-List: linux-input@vger.kernel.org

QW0gTW9udGFnLCBkZW0gMDIuMTAuMjAyMyB1bSAxNTowOSArMDAwMCBzY2hyaWViIE1hcnRpbiBL
ZXBwbGluZ2VyOgo+IEZyb206IEphbWllIExlbnRpbiA8am1AbGVudGluLmNvLnVrPgo+IAo+IFRo
ZSBVU0IgQ29tcGFjdCBLZXlib2FyZCB2YXJpYW50IHJlcXVpcmVzIGEgcmVzZXRfcmVzdW1lIGZ1
bmN0aW9uIHRvCj4gcmVzdG9yZSBrZXlib2FyZCBjb25maWd1cmF0aW9uIGFmdGVyIGEgc3VzcGVu
ZCBpbiBzb21lIHNpdHVhdGlvbnMuCj4gTW92ZQo+IGNvbmZpZ3VyYXRpb24gbm9ybWFsbHkgZG9u
ZSBvbiBwcm9iZSB0byBsZW5vdm9fZmVhdHVyZXNfc2V0X2NwdGtiZCgpLAo+IHRoZW4KPiByZWN5
Y2xlIHRoaXMgZm9yIHVzZSBvbiByZXNldF9yZXN1bWUuCj4gCj4gV2l0aG91dCwgdGhlIGtleWJv
YXJkIGFuZCBkcml2ZXIgd291bGQgZW5kIHVwIGluIGFuIGluY29uc2lzdGVudAo+IHN0YXRlLAo+
IGJyZWFraW5nIG1pZGRsZS1idXR0b24gc2Nyb2xsaW5nIGFtb25nc3Qgb3RoZXIgcHJvYmxlbXMs
IGFuZAo+IHR3aWRkbGluZwo+IHN5c2ZzIHZhbHVlcyB3b3VsZG4ndCBoZWxwIGFzIHRoZSBtaWRk
bGUtYnV0dG9uIG1vZGUgd29uJ3QgYmUgc2V0Cj4gdW50aWwKPiB0aGUgZHJpdmVyIGlzIHJlbG9h
ZGVkLgo+IAo+IFRlc3RlZCBvbiBhIFVTQiBhbmQgQmx1ZXRvb3RoIFRoaW5rcGFkIENvbXBhY3Qg
S2V5Ym9hcmQuCj4gCj4gQ0M6IHN0YWJsZUB2Z2VyLmtlcm5lbC5vcmcKPiBGaXhlczogOTRlZWZh
MjcxMzIzICgiSElEOiBsZW5vdm86IFVzZSBuYXRpdmUgbWlkZGxlLWJ1dHRvbiBtb2RlIGZvcgo+
IGNvbXBhY3Qga2V5Ym9hcmRzIikKPiBTaWduZWQtb2ZmLWJ5OiBKYW1pZSBMZW50aW4gPGptQGxl
bnRpbi5jby51az4KPiBTaWduZWQtb2ZmLWJ5OiBNYXJ0aW4gS2VwcGxpbmdlciA8bWFydGlua0Bw
b3N0ZW8uZGU+Cj4gLS0tCgpvayB3aG8gY291bGQgcmV2aWV3IGFuZCBwb3NzaWJseSBxdWV1ZSB0
aGlzPyBUaGlzIGZpeGVzIGEgcHJldHR5CmFubm95aW5nIGJ1ZyBhbmQgbWFrZXMgdGhlIEtleWJv
YXJkIHVzYWJsZSBhZnRlciByZXN1bWluZyBmcm9tIHN5c3RlbQpzdXNwZW5kLiBKaXJpIG9yIEJl
bmphbWluPyBTaG91bGQgSSBhZGQgRG1pdHJ5PwoKdGhhbmtzIGEgbG90LAoKICAgICAgICAgICAg
ICAgICAgICAgICAgIG1hcnRpbgoKCj4gwqBkcml2ZXJzL2hpZC9oaWQtbGVub3ZvLmMgfCA1MCAr
KysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLQo+IC0tCj4gwqAxIGZpbGUgY2hh
bmdlZCwgMzQgaW5zZXJ0aW9ucygrKSwgMTYgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvaGlkL2hpZC1sZW5vdm8uYyBiL2RyaXZlcnMvaGlkL2hpZC1sZW5vdm8uYwo+IGlu
ZGV4IDQ0NzYzYzBkYTQ0NC4uNjE0MzIwYmZmMzlmIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvaGlk
L2hpZC1sZW5vdm8uYwo+ICsrKyBiL2RyaXZlcnMvaGlkL2hpZC1sZW5vdm8uYwo+IEBAIC01MjEs
NiArNTIxLDE5IEBAIHN0YXRpYyB2b2lkIGxlbm92b19mZWF0dXJlc19zZXRfY3B0a2JkKHN0cnVj
dAo+IGhpZF9kZXZpY2UgKmhkZXYpCj4gwqDCoMKgwqDCoMKgwqDCoGludCByZXQ7Cj4gwqDCoMKg
wqDCoMKgwqDCoHN0cnVjdCBsZW5vdm9fZHJ2ZGF0YSAqY3B0a2JkX2RhdGEgPSBoaWRfZ2V0X2Ry
dmRhdGEoaGRldik7Cj4gwqAKPiArwqDCoMKgwqDCoMKgwqAvKgo+ICvCoMKgwqDCoMKgwqDCoCAq
IFRlbGwgdGhlIGtleWJvYXJkIGEgZHJpdmVyIHVuZGVyc3RhbmRzIGl0LCBhbmQgdHVybiBGNywK
PiBGOSwgRjExIGludG8KPiArwqDCoMKgwqDCoMKgwqAgKiByZWd1bGFyIGtleXMKPiArwqDCoMKg
wqDCoMKgwqAgKi8KPiArwqDCoMKgwqDCoMKgwqByZXQgPSBsZW5vdm9fc2VuZF9jbWRfY3B0a2Jk
KGhkZXYsIDB4MDEsIDB4MDMpOwo+ICvCoMKgwqDCoMKgwqDCoGlmIChyZXQpCj4gK8KgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoGhpZF93YXJuKGhkZXYsICJGYWlsZWQgdG8gc3dpdGNoIEY3
LzkvMTEgbW9kZTogJWRcbiIsCj4gcmV0KTsKPiArCj4gK8KgwqDCoMKgwqDCoMKgLyogU3dpdGNo
IG1pZGRsZSBidXR0b24gdG8gbmF0aXZlIG1vZGUgKi8KPiArwqDCoMKgwqDCoMKgwqByZXQgPSBs
ZW5vdm9fc2VuZF9jbWRfY3B0a2JkKGhkZXYsIDB4MDksIDB4MDEpOwo+ICvCoMKgwqDCoMKgwqDC
oGlmIChyZXQpCj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGhpZF93YXJuKGhkZXYs
ICJGYWlsZWQgdG8gc3dpdGNoIG1pZGRsZSBidXR0b246Cj4gJWRcbiIsIHJldCk7Cj4gKwo+IMKg
wqDCoMKgwqDCoMKgwqByZXQgPSBsZW5vdm9fc2VuZF9jbWRfY3B0a2JkKGhkZXYsIDB4MDUsIGNw
dGtiZF9kYXRhLQo+ID5mbl9sb2NrKTsKPiDCoMKgwqDCoMKgwqDCoMKgaWYgKHJldCkKPiDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGhpZF9lcnIoaGRldiwgIkZuLWxvY2sgc2V0dGlu
ZyBmYWlsZWQ6ICVkXG4iLCByZXQpOwo+IEBAIC0xMTI2LDIyICsxMTM5LDYgQEAgc3RhdGljIGlu
dCBsZW5vdm9fcHJvYmVfY3B0a2JkKHN0cnVjdAo+IGhpZF9kZXZpY2UgKmhkZXYpCj4gwqDCoMKg
wqDCoMKgwqDCoH0KPiDCoMKgwqDCoMKgwqDCoMKgaGlkX3NldF9kcnZkYXRhKGhkZXYsIGNwdGti
ZF9kYXRhKTsKPiDCoAo+IC3CoMKgwqDCoMKgwqDCoC8qCj4gLcKgwqDCoMKgwqDCoMKgICogVGVs
bCB0aGUga2V5Ym9hcmQgYSBkcml2ZXIgdW5kZXJzdGFuZHMgaXQsIGFuZCB0dXJuIEY3LAo+IEY5
LCBGMTEgaW50bwo+IC3CoMKgwqDCoMKgwqDCoCAqIHJlZ3VsYXIga2V5cyAoQ29tcGFjdCBvbmx5
KQo+IC3CoMKgwqDCoMKgwqDCoCAqLwo+IC3CoMKgwqDCoMKgwqDCoGlmIChoZGV2LT5wcm9kdWN0
ID09IFVTQl9ERVZJQ0VfSURfTEVOT1ZPX0NVU0JLQkQgfHwKPiAtwqDCoMKgwqDCoMKgwqDCoMKg
wqAgaGRldi0+cHJvZHVjdCA9PSBVU0JfREVWSUNFX0lEX0xFTk9WT19DQlRLQkQpIHsKPiAtwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgcmV0ID0gbGVub3ZvX3NlbmRfY21kX2NwdGtiZCho
ZGV2LCAweDAxLCAweDAzKTsKPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKHJl
dCkKPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoGhpZF93
YXJuKGhkZXYsICJGYWlsZWQgdG8gc3dpdGNoIEY3LzkvMTEKPiBtb2RlOiAlZFxuIiwgcmV0KTsK
PiAtwqDCoMKgwqDCoMKgwqB9Cj4gLQo+IC3CoMKgwqDCoMKgwqDCoC8qIFN3aXRjaCBtaWRkbGUg
YnV0dG9uIHRvIG5hdGl2ZSBtb2RlICovCj4gLcKgwqDCoMKgwqDCoMKgcmV0ID0gbGVub3ZvX3Nl
bmRfY21kX2NwdGtiZChoZGV2LCAweDA5LCAweDAxKTsKPiAtwqDCoMKgwqDCoMKgwqBpZiAocmV0
KQo+IC3CoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBoaWRfd2FybihoZGV2LCAiRmFpbGVk
IHRvIHN3aXRjaCBtaWRkbGUgYnV0dG9uOgo+ICVkXG4iLCByZXQpOwo+IC0KPiDCoMKgwqDCoMKg
wqDCoMKgLyogU2V0IGtleWJvYXJkIHNldHRpbmdzIHRvIGtub3duIHN0YXRlICovCj4gwqDCoMKg
wqDCoMKgwqDCoGNwdGtiZF9kYXRhLT5taWRkbGVidXR0b25fc3RhdGUgPSAwOwo+IMKgwqDCoMKg
wqDCoMKgwqBjcHRrYmRfZGF0YS0+Zm5fbG9jayA9IHRydWU7Cj4gQEAgLTEyNjQsNiArMTI2MSwy
NCBAQCBzdGF0aWMgaW50IGxlbm92b19wcm9iZShzdHJ1Y3QgaGlkX2RldmljZQo+ICpoZGV2LAo+
IMKgwqDCoMKgwqDCoMKgwqByZXR1cm4gcmV0Owo+IMKgfQo+IMKgCj4gKyNpZmRlZiBDT05GSUdf
UE0KPiArc3RhdGljIGludCBsZW5vdm9fcmVzZXRfcmVzdW1lKHN0cnVjdCBoaWRfZGV2aWNlICpo
ZGV2KQo+ICt7Cj4gK8KgwqDCoMKgwqDCoMKgc3dpdGNoIChoZGV2LT5wcm9kdWN0KSB7Cj4gK8Kg
wqDCoMKgwqDCoMKgY2FzZSBVU0JfREVWSUNFX0lEX0xFTk9WT19DVVNCS0JEOgo+ICvCoMKgwqDC
oMKgwqDCoGNhc2UgVVNCX0RFVklDRV9JRF9MRU5PVk9fVFBJSVVTQktCRDoKPiArwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKGhkZXYtPnR5cGUgPT0gSElEX1RZUEVfVVNCTU9VU0Up
Cj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBsZW5vdm9f
ZmVhdHVyZXNfc2V0X2NwdGtiZChoZGV2KTsKPiArCj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoGJyZWFrOwo+ICvCoMKgwqDCoMKgwqDCoGRlZmF1bHQ6Cj4gK8KgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoGJyZWFrOwo+ICvCoMKgwqDCoMKgwqDCoH0KPiArCj4gK8KgwqDCoMKg
wqDCoMKgcmV0dXJuIDA7Cj4gK30KPiArI2VuZGlmCj4gKwo+IMKgc3RhdGljIHZvaWQgbGVub3Zv
X3JlbW92ZV90cGtiZChzdHJ1Y3QgaGlkX2RldmljZSAqaGRldikKPiDCoHsKPiDCoMKgwqDCoMKg
wqDCoMKgc3RydWN0IGxlbm92b19kcnZkYXRhICpkYXRhX3BvaW50ZXIgPSBoaWRfZ2V0X2RydmRh
dGEoaGRldik7Cj4gQEAgLTEzODAsNiArMTM5NSw5IEBAIHN0YXRpYyBzdHJ1Y3QgaGlkX2RyaXZl
ciBsZW5vdm9fZHJpdmVyID0gewo+IMKgwqDCoMKgwqDCoMKgwqAucmF3X2V2ZW50ID0gbGVub3Zv
X3Jhd19ldmVudCwKPiDCoMKgwqDCoMKgwqDCoMKgLmV2ZW50ID0gbGVub3ZvX2V2ZW50LAo+IMKg
wqDCoMKgwqDCoMKgwqAucmVwb3J0X2ZpeHVwID0gbGVub3ZvX3JlcG9ydF9maXh1cCwKPiArI2lm
ZGVmIENPTkZJR19QTQo+ICvCoMKgwqDCoMKgwqDCoC5yZXNldF9yZXN1bWUgPSBsZW5vdm9fcmVz
ZXRfcmVzdW1lLAo+ICsjZW5kaWYKPiDCoH07Cj4gwqBtb2R1bGVfaGlkX2RyaXZlcihsZW5vdm9f
ZHJpdmVyKTsKPiDCoAoK

